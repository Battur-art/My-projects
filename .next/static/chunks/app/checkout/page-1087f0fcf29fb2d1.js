(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{1940:function(e,t,r){Promise.resolve().then(r.bind(r,2543))},2543:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return w}});var s=r(7437),a=r(2265),i=r(9376),n=r(7282),l=r(279),c=r(2820),d=r(9820),o=r(3675),u=r(9252),m=r(4362),h=r(3340),p=r(2660),f=r(9205);let x=(0,f.Z)("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),y=(0,f.Z)("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]);var g=r(4569),v=r(2708),j=r(4293);function w(){let{items:e,total:t,clearCart:r}=(0,u.j)(),{user:f}=(0,m.a)(),w=(0,i.useRouter)(),[N,A]=(0,a.useState)({name:(null==f?void 0:f.name)||"",email:(null==f?void 0:f.email)||"",phone:(null==f?void 0:f.phone)||"",address:(null==f?void 0:f.address)||""}),[b,C]=(0,a.useState)(!1);(0,a.useEffect)(()=>{0===e.length&&w.push("/cart")},[e.length,w]);let S=(e,t)=>{A(r=>({...r,[e]:t}))},E=async s=>{s.preventDefault(),C(!0);try{await new Promise(e=>setTimeout(e,2e3));let s={id:Date.now().toString(),userId:(null==f?void 0:f.id)||"guest",items:e,total:t,customerInfo:N,orderDate:new Date().toISOString(),status:"confirmed"},a=(0,g.UY)("orders",[]);a.push(s),(0,g.HG)("orders",a),r(),(0,h.Am)({title:"Order placed successfully!",description:"Order #".concat(s.id," has been confirmed.")}),w.push("/order-confirmation?orderId=".concat(s.id))}catch(e){(0,h.Am)({title:"Order failed",description:"Something went wrong. Please try again.",variant:"destructive"})}finally{C(!1)}};return(0,s.jsx)("div",{className:"min-h-screen bg-background",children:(0,s.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,s.jsxs)(v.FadeIn,{children:[(0,s.jsxs)(n.Button,{variant:"ghost",onClick:()=>w.push("/cart"),className:"mb-6",children:[(0,s.jsx)(p.Z,{className:"w-4 h-4 mr-2"}),"Back to Cart"]}),(0,s.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Checkout"})]}),(0,s.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,s.jsx)(j.Reveal,{children:(0,s.jsxs)(d.Zb,{children:[(0,s.jsx)(d.Ol,{children:(0,s.jsxs)(d.ll,{className:"flex items-center",children:[(0,s.jsx)(x,{className:"w-5 h-5 mr-2"})," Billing Information"]})}),(0,s.jsx)(d.aY,{children:(0,s.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c._,{htmlFor:"name",children:"Full Name *"}),(0,s.jsx)(l.I,{id:"name",type:"text",value:N.name,onChange:e=>S("name",e.target.value),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c._,{htmlFor:"email",children:"Email *"}),(0,s.jsx)(l.I,{id:"email",type:"email",value:N.email,onChange:e=>S("email",e.target.value),required:!0})]})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c._,{htmlFor:"phone",children:"Phone Number *"}),(0,s.jsx)(l.I,{id:"phone",type:"tel",value:N.phone,onChange:e=>S("phone",e.target.value),required:!0})]}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(c._,{htmlFor:"address",children:"Shipping Address *"}),(0,s.jsx)(o.g,{id:"address",rows:3,value:N.address,onChange:e=>S("address",e.target.value),placeholder:"Enter your complete address including city, state, and ZIP code",required:!0})]}),(0,s.jsx)("div",{className:"pt-4",children:(0,s.jsxs)(n.Button,{type:"submit",variant:"gradient",size:"lg",className:"w-full",disabled:b,children:[(0,s.jsx)(y,{className:"w-5 h-5 mr-2"}),b?"Processing Order...":"Place Order - ₮".concat(t.toLocaleString())]})})]})})]})}),(0,s.jsx)(j.Reveal,{children:(0,s.jsxs)(d.Zb,{className:"h-fit",children:[(0,s.jsx)(d.Ol,{children:(0,s.jsx)(d.ll,{children:"Order Summary"})}),(0,s.jsxs)(d.aY,{className:"space-y-4",children:[(0,s.jsx)("div",{className:"space-y-3",children:e.map((e,t)=>(0,s.jsx)(v.FadeIn,{children:(0,s.jsxs)("div",{className:"flex items-center gap-3 p-3 bg-muted/50 rounded-lg",children:[(0,s.jsx)("img",{src:e.phone.image,alt:e.phone.name,className:"w-12 h-12 object-cover rounded"}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsx)("h4",{className:"font-medium text-sm",children:e.phone.name}),(0,s.jsxs)("p",{className:"text-xs text-muted-foreground",children:[e.selectedColor," • ",e.selectedStorage," • Qty: ",e.quantity]})]}),(0,s.jsxs)("span",{className:"font-medium",children:["₮",(e.phone.price*e.quantity).toLocaleString()]})]})},t))}),(0,s.jsxs)("div",{className:"space-y-2 pt-4 border-t",children:[(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Subtotal"}),(0,s.jsxs)("span",{children:["₮",t.toLocaleString()]})]}),(0,s.jsxs)("div",{className:"flex justify-between",children:[(0,s.jsx)("span",{children:"Shipping"}),(0,s.jsx)("span",{className:"text-success",children:"Free"})]}),(0,s.jsxs)("div",{className:"flex justify-between text-lg font-bold pt-2 border-t",children:[(0,s.jsx)("span",{children:"Total"}),(0,s.jsxs)("span",{className:"text-primary",children:["₮",t.toLocaleString()]})]})]}),(0,s.jsx)("div",{className:"bg-muted/50 p-3 rounded-lg mt-6",children:(0,s.jsxs)("div",{className:"flex items-center text-sm text-muted-foreground",children:[(0,s.jsx)(x,{className:"w-4 h-4 mr-2"}),(0,s.jsx)("span",{children:"This is a demo checkout. No actual payment will be processed."})]})})]})]})})]})]})})}},2660:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(9205).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},9376:function(e,t,r){"use strict";var s=r(5475);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},4362:function(e,t,r){"use strict";r.d(t,{H:function(){return c},a:function(){return d}});var s=r(7437),a=r(2265),i=r(3340),n=r(4569);let l=(0,a.createContext)(void 0),c=e=>{let{children:t}=e,[r,c]=(0,a.useState)(null);(0,a.useEffect)(()=>{let e=(0,n.UY)("user",null);e&&c(e)},[]),(0,a.useEffect)(()=>{r?(0,n.HG)("user",r):(0,n.nf)("user")},[r]);let d=async(e,t)=>{try{let r=(0,n.UY)("users",[]).find(r=>r.email===e&&r.password===t);if(!r)return(0,i.Am)({title:"Login failed",description:"Invalid email or password.",variant:"destructive"}),!1;{let{password:e,...t}=r;return c(t),(0,i.Am)({title:"Welcome back!",description:"Logged in successfully."}),!0}}catch(e){return(0,i.Am)({title:"Login failed",description:"An error occurred during login.",variant:"destructive"}),!1}},o=async(e,t,r)=>{try{let s=(0,n.UY)("users",[]);if(s.find(e=>e.email===t))return(0,i.Am)({title:"Registration failed",description:"User with this email already exists.",variant:"destructive"}),!1;let a={id:Date.now().toString(),name:e,email:t,password:r};s.push(a),(0,n.HG)("users",s);let{password:l,...d}=a;return c(d),(0,i.Am)({title:"Welcome!",description:"Account created successfully."}),!0}catch(e){return(0,i.Am)({title:"Registration failed",description:"An error occurred during registration.",variant:"destructive"}),!1}};return(0,s.jsx)(l.Provider,{value:{user:r,isAuthenticated:!!r,login:d,register:o,logout:()=>{c(null),(0,i.Am)({title:"Logged out",description:"You have been logged out successfully."})},updateProfile:e=>{if(r){c({...r,...e});let t=(0,n.UY)("users",[]),s=t.findIndex(e=>e.id===r.id);-1!==s&&(t[s]={...t[s],...e},(0,n.HG)("users",t)),(0,i.Am)({title:"Profile updated",description:"Your profile has been updated successfully."})}}},children:t})},d=()=>{let e=(0,a.useContext)(l);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},9252:function(e,t,r){"use strict";r.d(t,{Z:function(){return o},j:function(){return u}});var s=r(7437),a=r(2265),i=r(3340),n=r(4569);let l=(0,a.createContext)(void 0),c=e=>{var t;let r=null===(t=e.phone.priceByStorage)||void 0===t?void 0:t[e.selectedStorage];return null!=r?r:e.phone.price},d=(e,t)=>{switch(t.type){case"ADD_ITEM":{let r;let{phone:s,color:a,storage:i}=t.payload,n=e.items.findIndex(e=>e.phone.id===s.id&&e.selectedColor===a&&e.selectedStorage===i);n>-1?(r=[...e.items],r[n].quantity+=1):r=[...e.items,{phone:s,quantity:1,selectedColor:a,selectedStorage:i}];let l=r.reduce((e,t)=>e+c(t)*t.quantity,0),d=r.reduce((e,t)=>e+t.quantity,0);return{items:r,total:l,itemCount:d}}case"REMOVE_ITEM":{let r=e.items.filter(e=>e.phone.id!==t.payload),s=r.reduce((e,t)=>e+t.phone.price*t.quantity,0),a=r.reduce((e,t)=>e+t.quantity,0);return{items:r,total:s,itemCount:a}}case"UPDATE_QUANTITY":{let{id:r,quantity:s}=t.payload;if(s<=0)return d(e,{type:"REMOVE_ITEM",payload:r});let a=e.items.map(e=>e.phone.id===r?{...e,quantity:s}:e),i=a.reduce((e,t)=>e+t.phone.price*t.quantity,0),n=a.reduce((e,t)=>e+t.quantity,0);return{items:a,total:i,itemCount:n}}case"CLEAR_CART":return{items:[],total:0,itemCount:0};case"LOAD_CART":{let e=t.payload,r=e.reduce((e,t)=>e+c(t)*t.quantity,0),s=e.reduce((e,t)=>e+t.quantity,0);return{items:e,total:r,itemCount:s}}default:return e}},o=e=>{let{children:t}=e,[r,c]=(0,a.useReducer)(d,{items:[],total:0,itemCount:0});return(0,a.useEffect)(()=>{let e=(0,n.UY)("cart",[]);Array.isArray(e)&&e.length>0&&c({type:"LOAD_CART",payload:e})},[]),(0,a.useEffect)(()=>{(0,n.HG)("cart",r.items)},[r.items]),(0,s.jsx)(l.Provider,{value:{...r,addToCart:(e,t,r)=>{c({type:"ADD_ITEM",payload:{phone:e,color:t,storage:r}}),(0,i.Am)({title:"Added to cart",description:"".concat(e.name," has been added to your cart.")})},removeFromCart:e=>{c({type:"REMOVE_ITEM",payload:e}),(0,i.Am)({title:"Removed from cart",description:"Item has been removed from your cart."})},updateQuantity:(e,t)=>{c({type:"UPDATE_QUANTITY",payload:{id:e,quantity:t}})},clearCart:()=>{c({type:"CLEAR_CART"}),(0,i.Am)({title:"Cart cleared",description:"All items have been removed from your cart."})}},children:t})},u=()=>{let e=(0,a.useContext)(l);if(void 0===e)throw Error("useCart must be used within a CartProvider");return e}},4569:function(e,t,r){"use strict";function s(){try{let e="__storage_test__";return window.localStorage.setItem(e,"1"),window.localStorage.removeItem(e),!0}catch(e){return!1}}function a(e,t){if(!s())return t;try{let r=window.localStorage.getItem(e);if(!r)return t;return JSON.parse(r)}catch(e){return t}}function i(e,t){if(!s())return!1;try{return window.localStorage.setItem(e,JSON.stringify(t)),!0}catch(e){return!1}}function n(e){if(s())try{window.localStorage.removeItem(e)}catch(e){}}r.d(t,{HG:function(){return i},UY:function(){return a},nf:function(){return n}})}},function(e){e.O(0,[14,478,710,971,117,744],function(){return e(e.s=1940)}),_N_E=e.O()}]);